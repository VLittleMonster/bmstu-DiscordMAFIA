# Дискорд игра “Мафия”

### Примечания:

! Все команды и сообщения бота будут редактироваться во время разработки.

Глобальный чат – общий чат канала дискорд.

Локальный чат – личный чат пользователя с ботом в дискорде.

Пронумерованный список игроков присылается в начале игры и перед каждым выбором игроков, также после каждого убийства список сокращается.

После каждого "убийства" жертве отводится 1 минута на последнее слово в глобальном чате.

Если пользователь не состоит в игре, то ему запрещен доступ к каналу.

### Роли в игре:

1) Мафия;
2) Комиссар;
3) Доктор;
4) Мирный житель.

### Цель игры.

За мирного жителя – вычислить мафию среди игроков.

За мафию – убить всех, пока их не вычислили.

За комиcсара – вычислить мафию и донести эту информацию до остальных участников.

За доктора – вылечить человека, предугадав, что на него покажет мафия.

### Начало игры.

Хост создает комнату командой /room + количество участников, бот пишет в чат, что была создана комната для игры в мафию и выдает токен для присоединения пользователей к данному сеансу. Люди, которые хотят присоединиться к игре заходят в комнату с помощью команды /join + token, когда набралось нужное количество игроков, хост пишет /start , и начинается игра. Бот отсылает роли всем участникам в локальный чат. Наступает ночь, просыпается мафия. 

### Взаимодействие в глобальном чате.

После ночи участники договариваются о выборе мафии ( выбор мафии с помощью команды /vote_mafia + номер игрока, которого хотят исключить ) если пользователи не смогли договориться ( нет преобладающего счетчика голосов на пользователях ), то бот выводит сообщение “Участники не смогли выбрать мафию” и стартует новая ночь. Если пользователи выбрали "мафию" бот печатает в глобальный чат ник пользователя, а также исключает данного пользователя из игры.

* Бот всегда озвучивает "Наступило утро, город просыпается + выбор мафии ( если он есть ) + выбор доктора ( если он есть )" или же "выбор дневного голосования в глобальном чате + наступила ночь, просыпается мафия"

### Взаимодействие в локальном чате.

1) Взаимодействие мафии.

Каждому игроку с данной ролью бот отправляет список других участников с этой ролью, тем самым мафия знакомится. Бот пишет, что пришло время сделать выбор и отводит на него 1 минуту. C помощью команды /talk + “сообщение” мафия может договариваться насчет выбора жертвы. Когда используется данная команда бот берет никнейм пользователя и его сообщения, а после, отсылает эти данные другим участникам с этой ролью. Когда мафия договорилась, каждый человек с данной ролью пишет в локальный чат с ботом /vote_kill + номер игрока, которого хочет убить. Если мафия не успевает договориться или нет преобладающего счетчика, то бот выводит сообщение: “Мафия не определилась с выбором”. Если мафия определяется с выбором, то бот смотрит на “флаг” доктора ( человек, который был вылечен ) если флаг на человеке, которого выбрала мафия, стоит, то он жив и мафия никого не убила, в ином случае, в эту ночь был убит данный пользователь.

2) Взаимодействие мирных жителей.

Смотреть пункт “Взаимодействие в глобальном чате”.

3) Взаимодействие комиссара.

Комиссар должен написать команду /verify + указать номер проверяемого пользователя, после чего бот дает ему односложный ответ Да/Нет. Также дается 1 минута на написание команды если комиссар не успевает написать предложенную команду, то бот оповещает о конце времени и игра продолжается.

Бот предлагает комиссару найти мафию из предложенного списка игроков. Комиссар должен указать никнейм проверяемого пользователя, после чего бот дает ему однозначный ответ Да/Нет.

4) Взаимодействие доктора.

Доктор должен указать команду /heal + номер пользователя, которого он хочет спасти, после чего бот сообщает доктору о лечении данного человека. Также дается 1 минута на написание команды если доктор не успевает написать предложенную команду, бот оповещает о конце времени и игра продолжается. Если доктор никого не лечит, то при наступлении утра выбор доктора звучит следующим образом: "Не смог определиться на кого замахнуться священной палочкой".


